<div align="center">

# üéôÔ∏è LexiSharp Keyboard

**AI-powered Smart Voice Input Method | Make Voice Input More Natural and Efficient**

English | [ÁÆÄ‰Ωì‰∏≠Êñá](README.md)

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![Platform](https://img.shields.io/badge/Platform-Android-green.svg)](https://www.android.com/)
[![Language](https://img.shields.io/badge/Language-Kotlin-blue.svg)](https://kotlinlang.org/)
[![Telegram](https://img.shields.io/badge/Telegram-Join%20Chat-blue?logo=telegram)](https://t.me/+UGFobXqi2bYzMDFl)
[![zread](https://img.shields.io/badge/Ask_Zread-_.svg?style=flat&color=00b0aa&labelColor=000000&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQuOTYxNTYgMS42MDAxSDIuMjQxNTZDMS44ODgxIDEuNjAwMSAxLjYwMTU2IDEuODg2NjQgMS42MDE1NiAyLjI0MDFWNC45NjAxQzEuNjAxNTYgNS4zMTM1NiAxLjg4ODEgNS42MDAxIDIuMjQxNTYgNS42MDAxSDQuOTYxNTZDNS4zMTUwMiA1LjYwMDEgNS42MDE1NiA1LjMxMzU2IDUuNjAxNTYgNC45NjAxVjIuMjQwMUM1LjYwMTU2IDEuODg2NjQgNS4zMTUwMiAxLjYwMDEgNC45NjE1NiAxLjYwMDFaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00Ljk2MTU2IDEwLjM5OTlIMi4yNDE1NkMxLjg4ODEgMTAuMzk5OSAxLjYwMTU2IDEwLjY4NjQgMS42MDE1NiAxMS4wMzk5VjEzLjc1OTlDMS42MDE1NiAxNC4xMTM0IDEuODg4MSAxNC4zOTk5IDIuMjQxNTYgMTQuMzk5OUg0Ljk2MTU2QzUuMzE1MDIgMTQuMzk5OSA1LjYwMTU2IDE0LjExMzQgNS42MDE1NiAxMy43NTk5VjExLjAzOTlDNS42MDE1NiAxMC42ODY0IDUuMzE1MDIgMTAuMzk5OSA0Ljk2MTU2IDEwLjM5OTlaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik0xMy43NTg0IDEuNjAwMUgxMS4wMzg0QzEwLjY4NSAxLjYwMDEgMTAuMzk4NCAxLjg4NjY0IDEwLjM5ODQgMi4yNDAxVjQuOTYwMUMxMC4zOTg0IDUuMzEzNTYgMTAuNjg1IDUuNjAwMSAxMS4wMzg0IDUuNjAwMUgxMy43NTg0QzE0LjExMTkgNS42MDAxIDE0LjM5ODQgNS4zMTM1NiAxNC4zOTg0IDQuOTYwMVYyLjI0MDFDMTQuMzk4NCAxLjg4NjY0IDE0LjExMTkgMS42MDAxIDEzLjc1ODQgMS42MDAxWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNNCAxMkwxMiA0TDQgMTJaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00IDEyTDEyIDQiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K&logoColor=ffffff)](https://zread.ai/BryceWG/LexiSharp-Keyboard)
[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/BryceWG/LexiSharp-Keyboard)

[Features](#-features) ‚Ä¢ [Quick Start](#-quick-start) ‚Ä¢ [User Guide](#-user-guide) ‚Ä¢ [Configuration](#-configuration)

</div>

## ‚ú® Features

<table>
<tr>
<td width="50%">

### üé§ Voice Recognition

- **Press & Hold Recording** - Simple and intuitive recording
- **Smart Auto-Stop** - Automatically stops recording on silence
- **Fast Recognition** - Release to upload, quick results
- **Multi-Engine Support** - 7+ mainstream ASR services
- **Local ASR Model** - Offline voice recognition, no network required, privacy-focused
- **AI Text Optimization** - LLM smart correction of recognition results

</td>
<td width="50%">

### üü£ Floating Ball Input ‚≠ê

- **Cross-IME Usage** - Voice input with any input method
- **Seamless Integration** - Maintain your original typing habits
- **Auto Insertion** - Recognition results automatically inserted
- **Compatibility Mode** - Support for Telegram, TikTok and other special apps
- **Visual Feedback** - Recording/processing status at a glance

</td>
</tr>
<tr>
<td width="50%">

### üìù Smart Input

- **AI Editing** - Voice commands for text editing
- **Custom Keys** - Personalized punctuation keys

</td>
<td width="50%">

### üé® User Experience

- **Material3 Design** - Modern interface style with Monet color adaptation
- **Multi-language Support** - Quick switching between Chinese and English
- **Keyboard Height Adjustment** - Three height levels to choose from
- **Test Input** - Test input method directly in settings
- **Statistics** - Recognition character count
- **Vibration Feedback** - Customizable feedback intensity
- **Auto Update Check** - Daily automatic update check on app launch

</td>
</tr>
</table>

## üì± UI Showcase

<table>
<tr>
<td width="50%" align="center">
<img src="images/keyboard_view_en.jpg" alt="Keyboard View" style="max-height: 500px; width: auto;"/>
<br/>
<b>üéπ Keyboard View</b>
<br/>
<sub>Clean keyboard interface with voice input, IME switching, and custom keys</sub>
</td>
<td width="50%" align="center">
<img src="images/settings_en.jpg" alt="Settings Interface" style="max-height: 500px; width: auto;"/>
<br/>
<b>‚öôÔ∏è Settings Interface</b>
<br/>
<sub>Rich configuration options with multiple ASR engines and LLM post-processing</sub>
</td>
</tr>
<tr>
<td width="50%" align="center">
<img src="images/floating_ball_en.jpg" alt="Floating Ball Feature" style="max-height: 500px; width: auto;"/>
<br/>
<b>üü£ Floating Ball Feature</b>
<br/>
<sub>Cross-IME voice recognition, voice input anytime, anywhere</sub>
</td>
<td width="50%" align="center">
<img src="images/post_processing_en.jpg" alt="AI Post-Processing" style="max-height: 500px; width: auto;"/>
<br/>
<b>ü§ñ AI Post-Processing</b>
<br/>
<sub>LLM intelligently optimizes recognition results to improve text quality</sub>
</td>
</tr>
</table>

## üöÄ Quick Start

### üìã System Requirements

- Android 10.0 (API 29) or higher
- Microphone permission (for voice recognition)
- Overlay permission (optional, for floating ball feature)
- Accessibility permission (optional, for automatic text insertion)

### üì• Installation Steps

1. **Download & Install**

   - Download the latest APK from [Releases](../../releases) page
   - Install on your Android device

2. **Enable Input Method**

   ```
   Settings ‚Üí System ‚Üí Language & Input ‚Üí Virtual Keyboard ‚Üí Manage Keyboards ‚Üí Enable "LexiSharp Keyboard"
   ```

3. **Configure ASR Service**

   - Open LexiSharp Keyboard settings
   - Select ASR vendor (recommended: Volcengine)
   - Enter your API key

4. **Start Using**

   - Switch to LexiSharp Keyboard in any input field
   - Long press the microphone button to start voice input

> üí° **Tip**: First-time users are recommended to configure Volcengine for 20 hours of free quota!

## üìñ User Guide

### üé§ Voice Input Feature

<details>
<summary><b>Basic Operations</b></summary>

1. Long press the microphone button in the center of the keyboard to start recording
2. Release the button, and the audio will be automatically uploaded to the selected ASR service for recognition
3. Recognition results will be automatically inserted into the current input field

**Smart Auto-Stop Feature**:

- When enabled, automatically stops recording when continuous silence is detected
- Adjustable silence duration (0.5-3 seconds) and sensitivity (1-10 levels) in settings
- Supports both streaming recognition (Volcengine, Soniox) and file recognition modes

**Segmented Recording & Auto-Continue (non-streaming)**:

- When reaching per-vendor local time limit, the current segment is cut and uploaded in the background while recording immediately continues for the next segment (no gap)
- Keyboard panel and Floating Ball keep the ‚ÄúRecording‚Äù appearance during segmentation (no flicker into ‚ÄúProcessing/Idle‚Äù)
- Per-vendor local caps (non-streaming):
  - Volcengine: 1 hour (official 2h, with safety margin)
  - SiliconFlow: 20 minutes
  - ElevenLabs: 20 minutes
  - OpenAI Whisper: 20 minutes
  - Alibaba DashScope: 3 minutes
  - Google Gemini: 4 hours (official ~9.5h, with safety margin)
  - Soniox: 1 hour
  - Local SenseVoice: 5 minutes
- Streaming mode has no duration cap

</details>

<details>
<summary><b>AI Editing Feature</b></summary>

1. Click the edit button on the keyboard (AI icon)
2. Speak editing commands (e.g., "delete the last word", "change 'hello' to 'hi'", etc.)
3. After speaking the command, press the edit button again, and AI will modify the previously recognized text or selected content based on the command

</details>

### ‚å®Ô∏è Keyboard Button Functions

<details>
<summary><b>Main Button Layout</b></summary>

| Button      | Function                | Special Operations                        |
| ----------- | ----------------------- | ----------------------------------------- |
| üé§ Mic      | Long press for voice    | -                                         |
| ü§ñ Post     | Toggle AI post-process  | -                                         |
| üí¨ Prompt   | Switch AI prompt preset | -                                         |
| ‚¨áÔ∏è Hide     | Hide keyboard           | -                                         |
| ‚å´ Back      | Delete characters       | Swipe up/left to delete all, down to undo |
| ‚öôÔ∏è Settings | Enter settings          | -                                         |
| üîÑ Switch   | Switch to other IME     | -                                         |
| ‚Üµ Enter     | New line or submit      | -                                         |

</details>

<details>
<summary><b>Custom Keys</b></summary>

- There are **4 customizable** punctuation buttons at the bottom of the keyboard
- You can customize the character or punctuation displayed on each button in settings
- Support adding common symbols: `,` `.` `?` `!` etc.

</details>

### üü£ Floating Ball Voice Recognition Feature ‚≠ê

> Perfectly solves the pain point of voice input working with regular input methods!

<details open>
<summary><b>Feature Highlights</b></summary>

#### üåê Cross-IME Voice Input

- Regardless of which input method you're currently using (Sogou, Baidu, Gboard, etc.), you can use voice input through the floating ball
- No need to frequently switch input methods, enjoy high-quality voice recognition while maintaining your original typing habits
- Recognition results are automatically inserted into the current input field for seamless integration

#### üíº Use Cases

| Scenario                | Description                                                                                     |
| ----------------------- | ----------------------------------------------------------------------------------------------- |
| üí¨ Daily Chat           | Use familiar input methods for typing, click floating ball for long text input                  |
| üìÑ Document Editing     | Use regular input methods for formatted content, quick voice input for long paragraphs          |
| üåç Multi-language Input | Maintain your IME's multi-language support while getting high-quality Chinese voice recognition |
| ‚ö° Efficiency Boost     | Switch between typing and voice input anytime, greatly improving input efficiency               |

#### üéØ Operation Flow

```
1. Enable "Use Floating Ball for Voice Recognition" in settings
2. Grant overlay permission and accessibility permission
3. Floating ball always displays on screen (adjustable transparency and size)
4. Long press and drag to adjust floating ball position
5. Click floating ball to start recording, click again to stop
6. Recognition results are automatically inserted into current input field
```

#### üé® Visual Feedback

- üîò **Idle State**: Microphone icon shows in gray
- üî¥ **Recording**: Icon turns red
- üîµ **AI Processing**: Icon turns blue
- **Function Menu**: Long press the floating ball to bring up the function menu, including options to switch to AI post-processing, switch input methods, etc.

</details>

<details>
<summary><b>Compatibility Mode</b></summary>

In some apps, input fields expose background placeholder text to Accessibility, which contaminates the inserted content. Enable ‚ÄúFloating write-text compatibility mode‚Äù in Floating Ball settings:

- When enabled: For apps listed under ‚ÄúTarget package names‚Äù, the floating ball will attempt Select-All + Paste with an invisible character to mask the background placeholder.
- Target packages: One full package name per line, exact match (e.g., org.telegram.messenger, nu.gpu.nagram, com.ss.android.ugc.aweme).
- Built-in examples: org.telegram.messenger, nu.gpu.nagram, com.ss.android.ugc.aweme.

> üí° Tip: If you encounter text insertion issues, enable compatibility mode and add the app's package here

</details>

<details>
<summary><b>Difference from IME Switching Floating Ball</b></summary>

| Type                      | Purpose                          | Applicable Scenarios                              |
| ------------------------- | -------------------------------- | ------------------------------------------------- |
| üîÑ IME Switch Ball        | Quickly switch back to LexiSharp | When you need to use this app's keyboard features |
| üé§ Voice Recognition Ball | Voice input with any IME         | Daily mixed usage scenarios                       |

> ‚ö†Ô∏è **Note**: The two modes are mutually exclusive. When the voice recognition floating ball is enabled, the IME switching floating ball will be automatically hidden

</details>

<details>
<summary><b>Recommended Configuration</b></summary>

```
‚úÖ Set your frequently used third-party IME as default (Sogou, Baidu, etc.)
‚úÖ Enable LexiSharp Keyboard's floating ball voice recognition, use non-streaming recognition. Streaming recognition is only supported by Volcengine and is in early stages
‚úÖ Use third-party IME for daily typing, click floating ball when voice input is needed
‚úÖ Enjoy the best of both worlds: familiar typing experience + high-quality voice recognition
‚úÖ Switch to LexiSharp Keyboard when needed for more smart ASR features
```

If you use Fcitx5, you can call up LexiSharp Keyboard through the voice recognition button and return to Fcitx5 through the LexiSharp Keyboard switch button.
(Requires enabling Fcitx5 linkage in LexiSharp Keyboard settings and ensuring Google voice input service is disabled)

</details>

---

## ‚öôÔ∏è Configuration

### üéØ ASR Vendor Selection & Configuration

The settings page supports configuration switching by vendor, showing only corresponding parameters for the selected vendor.

<table>
<tr>
<td width="50%">

#### üåã Volcengine (Recommended)

**Free Quota**: 20 hours

**Configuration Parameters**:

- `X-Api-App-Key`: Application ID
- `X-Api-Access-Key`: Access Token

**Application**: [Volcengine Console](https://console.volcengine.com/speech/app?opt=create)

</td>
<td width="50%">

#### ü§ñ OpenAI

**Supported Models**:

- `gpt-4o-mini-transcribe`
- `gpt-4o-transcribe`
- `whisper-1`

**Configuration Parameters**:

- `API Key`: Starts with `sk-`
- `Endpoint`: Full API address
- `Model`: Model name

> ‚ö†Ô∏è Single upload limit: 25MB

</td>
</tr>
<tr>
<td width="50%">

#### üíé SiliconFlow

**Default Model**: `FunAudioLLM/SenseVoiceSmall`

**Configuration Parameters**:

- `API Key`: Bearer Token
- `Model Name`: Model name

**Mutilmodal**: Support Qwen3-Omni series

</td>
<td width="50%">

#### üéµ ElevenLabs

**Configuration Parameters**:

- `API Key`: API key
- `Model ID`: Model ID

</td>
</tr>
<tr>
<td width="50%">

#### ‚òÅÔ∏è Alibaba Cloud Bailian

**Supported Model**: `qwen3-asr-flash`

**Configuration Parameters**:

- `API Key`: API key
- `Model`: Model name
- `Recognition Prompt`: Custom context guidance
- `Recognition Language`: Manually specify language

> üìù Uses OSS relay, slightly higher latency

</td>
<td width="50%">

#### üîÆ Google Gemini

**Configuration Parameters**:

- `API Key`: API key
- `Model`: Model name
- `Transcription Prompt`: Custom transcription guidance

**Feature**: Voice understanding through prompts

</td>
</tr>
<tr>
<td width="50%">

#### üéØ Soniox

**Supported Modes**:

- File Recognition: `stt-async-preview`
- Streaming Recognition: `stt-rt-preview`

**Configuration Parameters**:

- `API Key`: API key
- `Recognition Language`: Multi-language support

> üìù Non-streaming mode Uses OSS relay, slightly higher latency

</td>
<td width="50%">

#### üè† Local ASR (SenseVoice)

**Features**: Fully offline recognition, no network required, privacy-focused

**Supported Models**:

- `sensevoice small-int8`: Quantized model, faster, smaller size
- `sensevoice small-full`: Full model, higher accuracy

**Configuration Parameters**:

- `Model Variant`: Choose model variant
- `Thread Count`: Adjustable from 1-8 threads
- `Recognition Language`: auto/zh/en/ja/ko/yue
- `Use ITN`: Inverse Text Normalization
- `Model Keep-Alive Duration`: Control model memory usage

> üí° Powered by [sherpa-onnx](https://github.com/k2-fsa/sherpa-onnx)

</td>
</tr>
</table>

### üß† LLM Post-Processing Configuration

<details>
<summary><b>Configuration Parameters</b></summary>

| Parameter         | Description                          | Example                                      |
| ----------------- | ------------------------------------ | -------------------------------------------- |
| API Key           | LLM service API key                  | `sk-xxx...`                                  |
| Service Endpoint  | LLM API address                      | `https://api.openai.com/v1/chat/completions` |
| Model Name        | LLM model to use                     | `gpt-4o-mini`                                |
| Temperature       | Control randomness of generated text | `0.0 - 2.0`                                  |
| Prompt Presets    | Multiple preset prompts              | Customizable, can add and delete             |
| Auto Post-Process | Automatic post-processing toggle     | Enable/Disable                               |

</details>

### üéõÔ∏è Other Feature Configurations

<details>
<summary><b>ASR Advanced Settings</b></summary>

- **Silence Auto-Stop**: Enable/disable auto-stop feature
- **Stop Duration**: Adjustable from 0.5-3 seconds
- **Stop Sensitivity**: Three levels - 1-10
- **Recognition Prompt**: Support custom prompts for Gemini, DashScope and other engines
- **Language Selection**: Soniox, DashScope support multi-language selection

</details>

<details>
<summary><b>Speech Preset Information</b></summary>

- Function Description: When speech recognition result exactly matches a "name", it is automatically replaced with its "content", helping to quickly input common phrases, signatures, addresses, employee numbers, etc.
- Matching Rules: First perform strict case-sensitive matching, if no match then perform case-insensitive matching; replacement is only triggered when the entire text is identical to the name.
- Usage: Add or delete entries in "Other Settings ‚Üí Speech Preset Information", select entries to edit through the dropdown, and fill in "name" and "content" separately.
- Example: Name "My Address" ‚Üí Content "Shanghai, Xuhui District..."; when you say "My Address" and recognition is completed, it will be directly replaced with the preset content.

</details>

<details>
<summary><b>Floating Ball Settings</b></summary>

- **Voice Recognition Ball**: Transparency, size adjustment, compatibility mode
- **IME Switching Ball**: Quick switching function
- **IME Visibility Compatibility (per‚Äëapp)**: Applies only to listed packages; in these apps use IME package detection as compatibility fallback. Includes com.tencent.mm by default

</details>

<details>
<summary><b>Experience Settings</b></summary>

- **Keyboard Height**: Three levels - Small/Medium/Large
- **Vibration Feedback**: Microphone / keyboard button vibration
- **Language Settings**: Follow system / Simplified Chinese / English
- **Test Input**: Test input method directly in settings
- **Auto Update**: Daily automatic update check on app launch

</details>

---

### üé® Tech Stack

```
Kotlin 1.9.24
Android SDK 34 (Min SDK 29)
Material Design 3
Coroutines (async processing)
OkHttp (network requests)
SharedPreferences (data storage)
```

---

## üìÑ License

This project is licensed under the **Apache 2.0 License**, see the [LICENSE](LICENSE) file for details.

```
Apache 2.0 License - Free to use, modify, distribute, must retain copyright notice
```

## üë• Contributors

Thanks to all the developers who have contributed to this project!

<table>
<tr>
<td align="center">
<a href="https://github.com/BryceWG">
<img src="https://github.com/BryceWG.png" width="60px;" alt="BryceWG"/>
<br />
<sub><b>BryceWG</b></sub>
</a>
<br />
<sub>Project Creator</sub>
</td>
<td align="center">
  <a href="https://github.com/flyhunterl">
    <img src="https://github.com/flyhunterl.png" width="60px;" alt="flyhunterl" />
    <br />
    <sub><b>flyhunterl</b></sub>
  </a>
  <br />
  <sub>Feature Suggestions/Implementation</sub>
</td>
</tr>
</table>

## ‚òï Support & Appreciation

If this project helps you, please give it a Star ‚≠êÔ∏è and feel free to buy me a coffee ‚òïÔ∏è

<div align="center">
<img src="images/wechat.jpg" alt="WeChat Appreciation Code" width="300"/>
<br/>
<sub>Scan with WeChat to appreciate</sub>
</div>

## üíù Appreciation List

Thanks to the following users for their support and appreciation. Your encouragement is the driving force for the project's continuous development!

Â§©ÂáâÂ•Ω‰∏™Áßã - 16.66 RMB

flyhunterl - 6.66 RMB

---

## üôè Acknowledgments

Thanks to the following open-source projects for their technical support:

- [sherpa-onnx](https://github.com/k2-fsa/sherpa-onnx) - Provides technical support for local ASR models, making offline voice recognition possible

---

<div align="center">

**Made with ‚ù§Ô∏è by BryceWG**

</div>
