<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_gravity="top">

    <!-- 数字一行：按权重均分，圆角矩形背景 -->
    <LinearLayout
        android:id="@+id/rowNumpadDigits"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dp"
        
        android:orientation="horizontal"
        android:weightSum="10">

        <!-- 1..0 共10个，使用统一 tag=key40 供缩放，高度固定40dp，宽度按权重均分 -->
        <TextView android:id="@+id/np_key_1" style="@style/NpKeyRect"
            android:layout_width="0dp" android:layout_weight="1" android:text="1" android:tag="key40" />
        <TextView android:id="@+id/np_key_2" style="@style/NpKeyRect"
            android:layout_width="0dp" android:layout_weight="1" android:text="2" android:tag="key40" />
        <TextView android:id="@+id/np_key_3" style="@style/NpKeyRect"
            android:layout_width="0dp" android:layout_weight="1" android:text="3" android:tag="key40" />
        <TextView android:id="@+id/np_key_4" style="@style/NpKeyRect"
            android:layout_width="0dp" android:layout_weight="1" android:text="4" android:tag="key40" />
        <TextView android:id="@+id/np_key_5" style="@style/NpKeyRect"
            android:layout_width="0dp" android:layout_weight="1" android:text="5" android:tag="key40" />
        <TextView android:id="@+id/np_key_6" style="@style/NpKeyRect"
            android:layout_width="0dp" android:layout_weight="1" android:text="6" android:tag="key40" />
        <TextView android:id="@+id/np_key_7" style="@style/NpKeyRect"
            android:layout_width="0dp" android:layout_weight="1" android:text="7" android:tag="key40" />
        <TextView android:id="@+id/np_key_8" style="@style/NpKeyRect"
            android:layout_width="0dp" android:layout_weight="1" android:text="8" android:tag="key40" />
        <TextView android:id="@+id/np_key_9" style="@style/NpKeyRect"
            android:layout_width="0dp" android:layout_weight="1" android:text="9" android:tag="key40" />
        <TextView android:id="@+id/np_key_0" style="@style/NpKeyRect"
            android:layout_width="0dp" android:layout_weight="1" android:text="0" android:tag="key40"
            android:layout_marginEnd="0dp" />
    </LinearLayout>

    <!-- 标点区：两行固定符号（不滑动） -->
    <LinearLayout
        android:id="@+id/containerPunct"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <LinearLayout
            android:id="@+id/rowPunctWrap"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <LinearLayout
                android:id="@+id/rowPunct1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="4dp"
                
                android:orientation="horizontal"
                android:weightSum="10">
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="，" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="。" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="、" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="！" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="？" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="：" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="；" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="“" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="”" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="……" android:tag="key40" android:layout_marginEnd="0dp" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/rowPunct2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="4dp"
                
                android:orientation="horizontal"
                android:weightSum="10">
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="（" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text=")" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="[" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="]" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="{" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="}" android:tag="key40" />
                <TextView style="@style/NpKeyRect" android:layout_width="0dp" android:layout_weight="1" android:text="&lt;" android:tag="key40" />
                <TextView style="@style/NpKeyRect"
                    android:layout_width="0dp"
                    android:layout_weight="1"
                    android:text="&gt;"
                    android:tag="key40"
                    android:layout_marginEnd="4dp" />
                
                <ImageButton
                    android:id="@+id/np_btnBackspace"
                    android:layout_width="0dp"
                    android:layout_height="40dp"
                    android:layout_weight="2"
                    android:layout_marginStart="0dp"
                    android:layout_marginEnd="0dp"
                    android:tag="key40"
                    android:background="@drawable/bg_key_rect_button"
                    android:clipToOutline="true"
                    android:contentDescription="@string/cd_backspace"
                    android:foreground="@null"
                    android:padding="6dp"
                    android:src="@drawable/backspace_toggle"
                    android:stateListAnimator="@animator/key_button_state_list"
                    android:tint="?attr/colorOnSurfaceVariant" />
            </LinearLayout>

        </LinearLayout>
    </LinearLayout>

    <!-- 退格键已融合到符号第二行末尾，并占两格宽度 -->

    <!-- 固定底栏：返回、空格、回车（不随上方滑动） -->
    <LinearLayout
        android:id="@+id/rowNumpadBottomBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="4dp"
        android:orientation="horizontal"
        
        android:weightSum="8">

        <ImageButton
            android:id="@+id/np_btnBack"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="2"
            android:layout_marginEnd="4dp"
            android:tag="key40"
            android:background="@drawable/bg_key_rect_button"
            android:clipToOutline="true"
            android:contentDescription="@string/cd_numpad_back"
            android:foreground="@null"
            android:padding="6dp"
            android:src="@drawable/arrow_u_up_left_toggle"
            android:stateListAnimator="@animator/key_button_state_list"
            android:tint="?attr/colorOnSurfaceVariant" />

        <TextView
            android:id="@+id/np_key_space"
            style="@style/NpKeyRect"
            android:layout_width="0dp"
            android:layout_weight="4"
            android:tag="key40"
            android:text="@string/cd_space"
            android:contentDescription="@string/cd_space" />

        <ImageButton
            android:id="@+id/np_btnEnter"
            android:layout_width="0dp"
            android:layout_height="40dp"
            android:layout_weight="2"
            android:layout_marginEnd="0dp"
            android:tag="key40"
            android:background="@drawable/bg_key_rect_button"
            android:clipToOutline="true"
            android:contentDescription="@string/cd_enter"
            android:foreground="@null"
            android:padding="6dp"
            android:src="@drawable/key_return_toggle"
            android:stateListAnimator="@animator/key_button_state_list"
            android:tint="?attr/colorOnSurfaceVariant" />
    </LinearLayout>

</LinearLayout>
